{"ast":null,"code":"import React,{useEffect,useState,useContext}from\"react\";import axios from\"axios\";import{toast}from\"react-toastify\";import{useHistory}from\"react-router-dom\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VersionLog=()=>{const[versionLog,setVersionLog]=useState([]);const history=useHistory();const[loading,setLoading]=useState(true);const{user}=useContext(AuthContext);const[error,setError]=useState(null);// trava para nao acessar pagina que não pode\nuseEffect(()=>{async function fetchData(){if(!user.super){toast.error(\"Esta empresa não possui permissão para acessar essa página! Estamos lhe redirecionando.\");setTimeout(()=>{history.push(`/`);},1000);}}fetchData();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(()=>{const fetchReadme=async()=>{try{const response=await axios.get(\"https://api.github.com/repos/packtypebot/logs/contents/README.md\");const decodedContent=decodeBase64(response.data.content);const parsedLog=parseVersionLog(decodedContent);setVersionLog(parsedLog);setLoading(false);}catch(error){setError(\"Erro ao carregar o log de versões.\");setLoading(false);}};fetchReadme();},[]);// Função para decodificar Base64 com suporte UTF-8\nconst decodeBase64=str=>{return decodeURIComponent(Array.prototype.map.call(atob(str),c=>`%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`).join(\"\"));};const parseVersionLog=content=>{const versions=content.split(\"## \").slice(1);return versions.map(versionText=>{const[title,...changes]=versionText.split(\"\\n\").filter(line=>line.trim()!==\"\");return{version:title.trim(),changes:changes.map(change=>change.trim().replace(\"-\",\"\").trim())// Remover o traço\n};}).map(log=>({...log,changes:log.changes.map(change=>formatMarkdown(change))// Aplica a formatação do Markdown\n}));};const formatMarkdown=text=>{// Remover o símbolo \"•\" da mudança\nconst cleanText=text.replace(/•/g,\"\").trim();// Remove o \"•\" se ele existir\n// Aqui você pode adicionar mais formatação para o Markdown\nreturn cleanText.replace(/\\*\\*(.*?)\\*\\*/g,\"<strong>$1</strong>\")// Para negrito\n.replace(/\\*([^\\*]+)\\*/g,\"<em>$1</em>\");// Para itálico\n};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Carregando...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{children:error});return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\",fontFamily:\"Arial, sans-serif\",fontSize:\"14px\",maxWidth:\"600px\",margin:\"auto\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:\"center\",color:\"#333\",marginBottom:\"20px\",fontSize:\"18px\"},children:\"Log de Vers\\xF5es\"}),versionLog.map(_ref=>{let{version,changes}=_ref;return/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid #ddd\",borderRadius:\"8px\",padding:\"15px\",marginBottom:\"15px\",boxShadow:\"0px 4px 8px rgba(0, 0, 0, 0.1)\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:\"#0056b3\",borderBottom:\"2px solid #ddd\",paddingBottom:\"8px\",marginBottom:\"10px\",fontSize:\"16px\"},children:version}),/*#__PURE__*/_jsx(\"ul\",{style:{paddingLeft:\"0\",listStyleType:\"none\",// Remove o ponto antes dos ícones\ncolor:\"#555\"},children:changes.map((change,index)=>/*#__PURE__*/_jsx(\"li\",{style:{marginBottom:\"5px\"},dangerouslySetInnerHTML:{__html:change}},index))})]},version);})]});};export default VersionLog;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}