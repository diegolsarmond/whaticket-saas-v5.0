{"ast":null,"code":"import React,{useState,useEffect,useCallback}from\"react\";import{makeStyles,Paper,Typography,Modal,IconButton}from\"@material-ui/core\";import MainContainer from\"../../components/MainContainer\";import MainHeader from\"../../components/MainHeader\";import MainHeaderButtonsWrapper from\"../../components/MainHeaderButtonsWrapper\";import Title from\"../../components/Title\";import{i18n}from\"../../translate/i18n\";import useHelps from\"../../hooks/useHelps\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({mainPaperContainer:{overflowY:'auto',maxHeight:'calc(100vh - 200px)'},mainPaper:{width:'100%',display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(320px, 1fr))',gap:theme.spacing(3),padding:theme.spacing(2),marginBottom:theme.spacing(3)},helpPaper:{position:'relative',width:'100%',minHeight:'340px',padding:theme.spacing(2),boxShadow:theme.shadows[3],borderRadius:theme.spacing(1),cursor:'pointer',display:'flex',flexDirection:'column',justifyContent:'space-between',maxWidth:'340px'},paperHover:{transition:'transform 0.3s, box-shadow 0.3s','&:hover':{transform:'scale(1.03)',boxShadow:`0 0 8px`,color:theme.palette.primary.main}},videoThumbnail:{width:'100%',height:'calc(100% - 56px)',objectFit:'cover',borderRadius:`${theme.spacing(1)}px ${theme.spacing(1)}px 0 0`},videoTitle:{marginTop:theme.spacing(1),flex:1},videoDescription:{maxHeight:'100px',overflow:'hidden'},videoModal:{display:'flex',alignItems:'center',justifyContent:'center'},videoModalContent:{outline:'none',width:'90%',maxWidth:1024,aspectRatio:'16/9',position:'relative',backgroundColor:'white',borderRadius:theme.spacing(1),overflow:'hidden'}}));const Helps=()=>{const classes=useStyles();const[records,setRecords]=useState([]);const{list}=useHelps();const[selectedVideo,setSelectedVideo]=useState(null);useEffect(()=>{async function fetchData(){const helps=await list();setRecords(helps);}fetchData();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);const openVideoModal=video=>{setSelectedVideo(video);};const closeVideoModal=()=>{setSelectedVideo(null);};const handleModalClose=useCallback(event=>{if(event.key===\"Escape\"){closeVideoModal();}},[]);useEffect(()=>{document.addEventListener(\"keydown\",handleModalClose);return()=>{document.removeEventListener(\"keydown\",handleModalClose);};},[handleModalClose]);const renderVideoModal=()=>{return/*#__PURE__*/_jsx(Modal,{open:Boolean(selectedVideo),onClose:closeVideoModal,className:classes.videoModal,children:/*#__PURE__*/_jsx(\"div\",{className:classes.videoModalContent,children:selectedVideo&&/*#__PURE__*/_jsx(\"iframe\",{style:{width:\"100%\",height:\"100%\",position:\"absolute\",top:0,left:0},src:`https://www.youtube.com/embed/${selectedVideo}`,title:\"YouTube video player\",frameBorder:\"0\",allow:\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",allowFullScreen:true})})});};const renderHelps=()=>{return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:`${classes.mainPaper} ${classes.mainPaperContainer}`,children:records.length?records.map((record,key)=>/*#__PURE__*/_jsxs(Paper,{className:`${classes.helpPaper} ${classes.paperHover}`,onClick:()=>openVideoModal(record.video),children:[/*#__PURE__*/_jsx(\"img\",{src:`https://img.youtube.com/vi/${record.video}/mqdefault.jpg`,alt:\"Thumbnail\",className:classes.videoThumbnail}),/*#__PURE__*/_jsx(Typography,{variant:\"button\",className:classes.videoTitle,children:record.title}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",className:classes.videoDescription,children:record.description})]},key)):null})});};return/*#__PURE__*/_jsxs(MainContainer,{children:[/*#__PURE__*/_jsxs(MainHeader,{children:[/*#__PURE__*/_jsxs(Title,{children:[i18n.t(\"helps.title\"),\" (\",records.length,\")\"]}),/*#__PURE__*/_jsx(MainHeaderButtonsWrapper,{})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.mainPaper,children:renderHelps()}),renderVideoModal()]});};export default Helps;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}