{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import{useHistory}from\"react-router-dom\";import QRCode from'react-qr-code';import{SuccessContent,Total}from'./style';import{CopyToClipboard}from'react-copy-to-clipboard';import{FaCopy,FaCheckCircle}from'react-icons/fa';import{SocketContext}from\"../../../context/Socket/SocketContext\";import{useDate}from\"../../../hooks/useDate\";import{toast}from\"react-toastify\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function CheckoutSuccess(props){const{pix}=props;const[pixString]=useState(pix.qrcode.qrcode);const[copied,setCopied]=useState(false);const history=useHistory();const{dateToClient}=useDate();const socketManager=useContext(SocketContext);useEffect(()=>{const companyId=localStorage.getItem(\"companyId\");const socket=socketManager.getSocket(companyId);socket.on(`company-${companyId}-payment`,data=>{if(data.action===\"CONCLUIDA\"){toast.success(`Sua licença foi renovada até ${dateToClient(data.company.dueDate)}!`);setTimeout(()=>{history.push(\"/\");},4000);}});},[history,socketManager]);const handleCopyQR=()=>{setTimeout(()=>{setCopied(false);},1*1000);setCopied(true);};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(Total,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"TOTAL\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[\"R$\",pix.valor.original.toLocaleString('pt-br',{minimumFractionDigits:2})]})]}),/*#__PURE__*/_jsxs(SuccessContent,{children:[/*#__PURE__*/_jsx(QRCode,{value:pixString}),/*#__PURE__*/_jsx(CopyToClipboard,{text:pixString,onCopy:handleCopyQR,children:/*#__PURE__*/_jsx(\"button\",{className:\"copy-button\",type:\"button\",children:copied?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Copiado\"}),/*#__PURE__*/_jsx(FaCheckCircle,{size:18})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Copiar c\\xF3digo QR\"}),/*#__PURE__*/_jsx(FaCopy,{size:18})]})})}),/*#__PURE__*/_jsx(\"span\",{children:\"Para finalizar, basta realizar o pagamento escaneando ou colando o c\\xF3digo Pix acima :)\"})]})]});}export default CheckoutSuccess;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}